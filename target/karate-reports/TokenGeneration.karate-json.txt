{"failedCount":2,"prefixedPath":"classpath:TokenGeneration.feature","packageQualifiedName":"TokenGeneration","loopIndex":-1,"relativePath":"TokenGeneration.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1672535000,"millis":1672.535,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def responseContext = callonce read('classpath:helpers\/generate-token.feature')"},"stepLog":"14:08:10.885 << lock released, cached callonce: read('classpath:helpers\/generate-token.feature')\n","callResults":[{"failedCount":0,"prefixedPath":"classpath:helpers\/generate-token.feature","packageQualifiedName":"helpers.generate-token","loopIndex":-1,"relativePath":"helpers\/generate-token.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":30432400,"millis":30.4324,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def projectDir = karate.properties['karate.project.dir'] ? karate.properties['karate.project.dir'] : java.lang.System.getProperty('user.dir')"},"stepLog":"14:08:08.947 key store key count for classpath:certificado\/clientcert.cbiblian.internal 1.pfx: 1\n14:08:09.238 >> lock acquired, begin callonce: read('classpath:helpers\/generate-token.feature')\n14:08:09.270 key store key count for classpath:certificado\/clientcert.cbiblian.internal 1.pfx: 1\n"},{"result":{"nanos":9922000,"millis":9.922,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def Paths = Java.type('java.nio.file.Paths')"}},{"result":{"nanos":7539200,"millis":7.5392,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def tokenDirectory = Paths.get(projectDir, 'target')"}},{"result":{"nanos":10591000,"millis":10.591,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def tokenTextPath = tokenDirectory.resolve('token.txt').toString()"}},{"result":{"nanos":2933500,"millis":2.9335,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def tokenJsonPath = tokenDirectory.resolve('token-data.json').toString()"}},{"result":{"nanos":2175700,"millis":2.1757,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def tokenResponsePath = tokenDirectory.resolve('token-response.json').toString()"}},{"result":{"nanos":1247400,"millis":1.2474,"status":"passed"},"step":{"comments":["# Solicita el token con grant client_credentials utilizando las credenciales QA."],"line":13,"prefix":"*","index":0,"text":"def clientId = '0205cb'"}},{"result":{"nanos":1124000,"millis":1.124,"status":"passed"},"step":{"line":14,"prefix":"*","index":1,"text":"def clientSecret = 'iXaIz03uhylB2nG6jxTLz2QdHs37GbXn'"}},{"result":{"nanos":713600,"millis":0.7136,"status":"passed"},"step":{"line":15,"prefix":"Given","index":2,"text":"url 'https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token'"}},{"result":{"nanos":786600,"millis":0.7866,"status":"passed"},"step":{"line":16,"prefix":"And","index":3,"text":"header Content-Type = 'application\/x-www-form-urlencoded'"}},{"result":{"nanos":188640200,"millis":188.6402,"status":"passed"},"step":{"line":17,"prefix":"And","index":4,"text":"form field grant_type = 'client_credentials'"}},{"result":{"nanos":1329000,"millis":1.329,"status":"passed"},"step":{"line":18,"prefix":"And","index":5,"text":"form field client_id = clientId"}},{"result":{"nanos":423600,"millis":0.4236,"status":"passed"},"step":{"line":19,"prefix":"And","index":6,"text":"form field client_secret = clientSecret"}},{"result":{"nanos":817025600,"millis":817.0256,"status":"passed"},"step":{"line":20,"prefix":"When","index":7,"text":"method post"},"stepLog":"14:08:09.784 request:\n1 > POST https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token\n1 > Content-Type: application\/x-www-form-urlencoded\n1 > Content-Length: 93\n1 > Host: autenticacionqa.coonecta.com.ec\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\ngrant_type=client_credentials&client_id=0205cb&client_secret=iXaIz03uhylB2nG6jxTLz2QdHs37GbXn\n\n14:08:10.370 response time in milliseconds: 576\n1 < 200\n1 < Date: Wed, 22 Oct 2025 19:08:02 GMT\n1 < Content-Type: application\/json\n1 < Content-Length: 1492\n1 < Connection: keep-alive\n1 < Cache-Control: no-store\n1 < Pragma: no-cache\n1 < Referrer-Policy: no-referrer\n1 < Strict-Transport-Security: max-age=31536000; includeSubDomains\n1 < X-Content-Type-Options: nosniff\n{\"access_token\":\"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI2dUJWTkN6VlViUFBlTFdReEM0WDAyYVM3UnM2UGRYV1dja1dfc0xZMHlFIn0.eyJleHAiOjE3NjExNjAzODIsImlhdCI6MTc2MTE2MDA4MiwianRpIjoidHJydGNjOmUwZWZmODJlLTgyODQtY2I2MC02Y2NmLTI5NjA2OTBjOWFhMCIsImlzcyI6Imh0dHBzOi8vYXV0ZW50aWNhY2lvbnFhLmNvb25lY3RhLmNvbS5lYy9hdXRoL3JlYWxtcy9QQU5BUEFZIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6Ijk5OGMyZmUwLTJjOGYtNGQwNC1iZjExLWY1OWExZTM5ODg3MyIsInR5cCI6IkJlYXJlciIsImF6cCI6IjAyMDVjYiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiLyoiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtYWRtaW5wYW5hcGF5Iiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7IjAyMDVjYiI6eyJyb2xlcyI6WyJ1bWFfcHJvdGVjdGlvbiJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMTAuMTAuMTUxIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LTAyMDVjYiIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xMC4xNTEiLCJjbGllbnRfaWQiOiIwMjA1Y2IifQ.PTZEstR6aCY6zKCHemgr9vawITd3cz_cisSPRvLyk7Lcv110-ePinBLnt9Z_W4jyUU6cUbs_huARM8I9qagdM_5gvUfvEZ3iz-xo6HRDJ2zkwqHkJLLdH0xmjztVcrWcfMWypQCzz2n5mB12nH-hLuu5BBug1BMT-R7k-AuK7rVy5-iSzWDf69pSHV3_3lSV1EnpXN4D_GnyG0FufsNfIZtRq5Vb8ETwq5XndwMqdb0e5ii7xqsCjXgMm8P7wBx2NeCghqYDh4ZQVchiDzLWQYiY4xQFCPH3qAcnYzhpx3j5NRXVAkKylw98nq6FAmtzPSMR93p1VDzHjhg6_LbOSQ\",\"expires_in\":300,\"refresh_expires_in\":0,\"token_type\":\"Bearer\",\"not-before-policy\":0,\"scope\":\"profile email\"}\n\n"},{"result":{"nanos":84900,"millis":0.0849,"status":"passed"},"step":{"line":21,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":4893200,"millis":4.8932,"status":"passed"},"step":{"line":22,"prefix":"*","index":9,"text":"def jsonResponse = response"}},{"result":{"nanos":28810000,"millis":28.81,"status":"passed"},"step":{"line":23,"prefix":"*","index":10,"text":"def codecb = clientId.substring(0, 4)"}},{"result":{"nanos":23258200,"millis":23.2582,"status":"passed"},"step":{"line":24,"prefix":"*","index":11,"text":"def formattedDate = java.time.LocalDate.now().format(java.time.format.DateTimeFormatter.ofPattern('yyyyMMdd'))"}},{"result":{"nanos":53111500,"millis":53.1115,"status":"passed"},"step":{"line":25,"prefix":"*","index":12,"text":"match jsonResponse.access_token != null"}},{"result":{"nanos":7631000,"millis":7.631,"status":"passed"},"step":{"endLine":33,"line":26,"prefix":"*","docString":"{\n  currentDate: '#(formattedDate)',\n  coop_codecb: '#(codecb)',\n  auth_tokencb: '#(jsonResponse.access_token)'\n}","index":13,"text":"def tokenInfo ="}},{"result":{"nanos":2411900,"millis":2.4119,"status":"passed"},"step":{"line":34,"prefix":"*","index":14,"text":"set tokenInfo.responseStatus = responseStatus"}},{"result":{"nanos":2692300,"millis":2.6923,"status":"passed"},"step":{"line":35,"prefix":"*","index":15,"text":"set tokenInfo.rawResponse = jsonResponse"}},{"result":{"nanos":1598500,"millis":1.5985,"status":"passed"},"step":{"line":36,"prefix":"*","index":16,"text":"def Files = Java.type('java.nio.file.Files')"}},{"result":{"nanos":1555700,"millis":1.5557,"status":"passed"},"step":{"line":37,"prefix":"*","index":17,"text":"def StandardCharsets = Java.type('java.nio.charset.StandardCharsets')"}},{"result":{"nanos":2001100,"millis":2.0011,"status":"passed"},"step":{"line":38,"prefix":"*","index":18,"text":"def ObjectMapper = Java.type('com.fasterxml.jackson.databind.ObjectMapper')"}},{"result":{"nanos":31855000,"millis":31.855,"status":"passed"},"step":{"line":39,"prefix":"*","index":19,"text":"def mapper = new ObjectMapper()"}},{"result":{"nanos":4689200,"millis":4.6892,"status":"passed"},"step":{"line":40,"prefix":"*","index":20,"text":"eval Files.createDirectories(tokenDirectory)"}},{"result":{"nanos":2411300,"millis":2.4113,"status":"passed"},"step":{"line":41,"prefix":"*","index":21,"text":"set tokenInfo.tokenPath = tokenTextPath"}},{"result":{"nanos":1126900,"millis":1.1269,"status":"passed"},"step":{"line":42,"prefix":"*","index":22,"text":"set tokenInfo.tokenJsonPath = tokenJsonPath"}},{"result":{"nanos":950000,"millis":0.95,"status":"passed"},"step":{"line":43,"prefix":"*","index":23,"text":"set tokenInfo.tokenResponsePath = tokenResponsePath"}},{"result":{"nanos":19332000,"millis":19.332,"status":"passed"},"step":{"line":44,"prefix":"*","index":24,"text":"eval Files.write(Paths.get(tokenTextPath), tokenInfo.auth_tokencb.getBytes(StandardCharsets.UTF_8))"}},{"result":{"nanos":120375500,"millis":120.3755,"status":"passed"},"step":{"line":45,"prefix":"*","index":25,"text":"eval Files.write(Paths.get(tokenJsonPath), mapper.writeValueAsBytes(tokenInfo))"}},{"result":{"nanos":10593000,"millis":10.593,"status":"passed"},"step":{"line":46,"prefix":"*","index":26,"text":"eval Files.write(Paths.get(tokenResponsePath), mapper.writeValueAsBytes({ status: responseStatus, response: jsonResponse }))"}},{"result":{"nanos":8569500,"millis":8.5695,"status":"passed"},"step":{"line":47,"prefix":"*","index":27,"text":"karate.log('Token almacenado en:', tokenTextPath)"},"stepLog":"14:08:10.706 Token almacenado en: C:\\Users\\aromero\\OneDrive - RED TRANSACCIONAL COOPERATIVA RTC COONECTA\\Escritorio\\PRUEBA - TATA\\Karate-EJERCICIO2\\target\\token.txt \n"},{"result":{"nanos":2273300,"millis":2.2733,"status":"passed"},"step":{"line":48,"prefix":"*","index":28,"text":"karate.log('Detalle crudo almacenado en:', tokenResponsePath)"},"stepLog":"14:08:10.711 Detalle crudo almacenado en: C:\\Users\\aromero\\OneDrive - RED TRANSACCIONAL COOPERATIVA RTC COONECTA\\Escritorio\\PRUEBA - TATA\\Karate-EJERCICIO2\\target\\token-response.json \n"},{"result":{"nanos":800700,"millis":0.8007,"status":"passed"},"step":{"line":49,"prefix":"*","index":29,"text":"def result = tokenInfo"}}],"executorName":"main","line":11,"name":"Solicitar token con client_credentials y preparar datos compartidos","description":"","durationMillis":1405.9085,"startTime":1761160089282,"failed":false,"refId":"[1:11]","endTime":1761160090711,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":5810700,"millis":5.8107,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def projectDir = karate.properties['karate.project.dir'] ? karate.properties['karate.project.dir'] : java.lang.System.getProperty('user.dir')"},"stepLog":"14:08:10.727 key store key count for classpath:certificado\/clientcert.cbiblian.internal 1.pfx: 1\n"},{"result":{"nanos":2327300,"millis":2.3273,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def Paths = Java.type('java.nio.file.Paths')"}},{"result":{"nanos":1819100,"millis":1.8191,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def tokenDirectory = Paths.get(projectDir, 'target')"}},{"result":{"nanos":1290700,"millis":1.2907,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def tokenTextPath = tokenDirectory.resolve('token.txt').toString()"}},{"result":{"nanos":1324500,"millis":1.3245,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def tokenJsonPath = tokenDirectory.resolve('token-data.json').toString()"}},{"result":{"nanos":1170300,"millis":1.1703,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def tokenResponsePath = tokenDirectory.resolve('token-response.json').toString()"}},{"result":{"nanos":34830800,"millis":34.8308,"status":"passed"},"step":{"line":52,"prefix":"*","index":0,"text":"def savedToken = read('file:' + tokenJsonPath)"}},{"result":{"nanos":2071200,"millis":2.0712,"status":"passed"},"step":{"line":53,"prefix":"*","index":1,"text":"match savedToken.auth_tokencb != null"}},{"result":{"nanos":8430100,"millis":8.4301,"status":"passed"},"step":{"line":54,"prefix":"*","index":2,"text":"match savedToken.responseStatus == 200"}},{"result":{"nanos":4825100,"millis":4.8251,"status":"passed"},"step":{"line":55,"prefix":"*","index":3,"text":"def today = java.time.LocalDate.now().format(java.time.format.DateTimeFormatter.ofPattern('yyyyMMdd'))"}},{"result":{"nanos":1751800,"millis":1.7518,"status":"passed"},"step":{"line":56,"prefix":"*","index":4,"text":"match savedToken.currentDate == today"}},{"result":{"nanos":1579100,"millis":1.5791,"status":"passed"},"step":{"line":57,"prefix":"*","index":5,"text":"match savedToken.coop_codecb == '0205'"}},{"result":{"nanos":5813700,"millis":5.8137,"status":"passed"},"step":{"line":58,"prefix":"*","index":6,"text":"def responseEnvelope = read('file:' + tokenResponsePath)"}},{"result":{"nanos":2007200,"millis":2.0072,"status":"passed"},"step":{"line":59,"prefix":"*","index":7,"text":"match responseEnvelope.status == savedToken.responseStatus"}}],"executorName":"main","line":51,"name":"Validar estructura persistida del token","description":"","durationMillis":75.0516,"startTime":1761160090730,"failed":false,"refId":"[2:51]","endTime":1761160090807,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":4953300,"millis":4.9533,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def projectDir = karate.properties['karate.project.dir'] ? karate.properties['karate.project.dir'] : java.lang.System.getProperty('user.dir')"},"stepLog":"14:08:10.827 key store key count for classpath:certificado\/clientcert.cbiblian.internal 1.pfx: 1\n"},{"result":{"nanos":676000,"millis":0.676,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def Paths = Java.type('java.nio.file.Paths')"}},{"result":{"nanos":687700,"millis":0.6877,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def tokenDirectory = Paths.get(projectDir, 'target')"}},{"result":{"nanos":505800,"millis":0.5058,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def tokenTextPath = tokenDirectory.resolve('token.txt').toString()"}},{"result":{"nanos":383500,"millis":0.3835,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def tokenJsonPath = tokenDirectory.resolve('token-data.json').toString()"}},{"result":{"nanos":3882000,"millis":3.882,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def tokenResponsePath = tokenDirectory.resolve('token-response.json').toString()"}},{"result":{"nanos":11778700,"millis":11.7787,"status":"passed"},"step":{"line":62,"prefix":"*","index":0,"text":"def rawToken = karate.readAsString('file:' + tokenTextPath).trim()"}},{"result":{"nanos":15319500,"millis":15.3195,"status":"passed"},"step":{"line":63,"prefix":"*","index":1,"text":"assert rawToken.length() > 20"}},{"result":{"nanos":4445600,"millis":4.4456,"status":"passed"},"step":{"line":64,"prefix":"*","index":2,"text":"def savedToken = read('file:' + tokenJsonPath)"}},{"result":{"nanos":2701300,"millis":2.7013,"status":"passed"},"step":{"line":65,"prefix":"*","index":3,"text":"match savedToken.auth_tokencb == rawToken"}},{"result":{"nanos":1103100,"millis":1.1031,"status":"passed"},"step":{"line":66,"prefix":"*","index":4,"text":"match savedToken.tokenPath == tokenTextPath"}},{"result":{"nanos":521200,"millis":0.5212,"status":"passed"},"step":{"line":67,"prefix":"*","index":5,"text":"def tokenInfo = savedToken"}},{"result":{"nanos":429000,"millis":0.429,"status":"passed"},"step":{"line":68,"prefix":"*","index":6,"text":"def result = tokenInfo"}}],"executorName":"main","line":61,"name":"Verificar consistencia de archivos auxiliares","description":"","durationMillis":47.3867,"startTime":1761160090831,"failed":false,"refId":"[3:61]","endTime":1761160090878,"exampleIndex":-1}],"callDepth":1,"name":"Generar y almacenar token OAuth PANAPAY","description":"","resultDate":"2025-10-22 02:08:11 p. m.","durationMillis":1528.3468,"passedCount":3}]},{"result":{"nanos":1507700,"millis":1.5077,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def tokenData = responseContext.tokenInfo"}},{"result":{"nanos":719200,"millis":0.7192,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def Files = Java.type('java.nio.file.Files')"}},{"result":{"nanos":410300,"millis":0.4103,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def Paths = Java.type('java.nio.file.Paths')"}},{"result":{"nanos":356100,"millis":0.3561,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def StandardCharsets = Java.type('java.nio.charset.StandardCharsets')"}},{"result":{"nanos":2083700,"millis":2.0837,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def projectDir = karate.properties['karate.project.dir'] ? karate.properties['karate.project.dir'] : java.lang.System.getProperty('user.dir')"}},{"result":{"nanos":1451200,"millis":1.4512,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def tokenPath = Paths.get(projectDir, 'target', 'token.txt')"}},{"result":{"nanos":1146700,"millis":1.1467,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def tokenJsonPath = Paths.get(projectDir, 'target', 'token-data.json')"}},{"result":{"nanos":1098100,"millis":1.0981,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def tokenResponsePath = Paths.get(projectDir, 'target', 'token-response.json')"}},{"result":{"nanos":3103200,"millis":3.1032,"status":"passed"},"step":{"line":15,"prefix":"*","index":0,"text":"match tokenData.auth_tokencb != null"}},{"result":{"nanos":3494400,"millis":3.4944,"status":"passed"},"step":{"line":16,"prefix":"*","index":1,"text":"def plainToken = karate.readAsString('file:' + tokenPath.toString())"}},{"result":{"nanos":4389900,"millis":4.3899,"status":"passed"},"step":{"line":17,"prefix":"*","index":2,"text":"def persisted = karate.read('file:' + tokenJsonPath.toString())"}},{"result":{"nanos":4201900,"millis":4.2019,"status":"passed"},"step":{"line":18,"prefix":"*","index":3,"text":"def persistedResponse = karate.read('file:' + tokenResponsePath.toString())"}},{"result":{"nanos":5881000,"millis":5.881,"status":"passed"},"step":{"line":19,"prefix":"*","index":4,"text":"match plainToken.trim() == tokenData.auth_tokencb"}},{"result":{"nanos":4894300,"millis":4.8943,"status":"passed"},"step":{"line":20,"prefix":"*","index":5,"text":"match persisted.auth_tokencb == tokenData.auth_tokencb"}},{"result":{"nanos":2836200,"millis":2.8362,"status":"passed"},"step":{"line":21,"prefix":"*","index":6,"text":"match persisted.currentDate == tokenData.currentDate"}},{"result":{"nanos":4116300,"millis":4.1163,"status":"passed"},"step":{"line":22,"prefix":"*","index":7,"text":"match persisted.coop_codecb == tokenData.coop_codecb"}},{"result":{"nanos":4666200,"millis":4.6662,"status":"passed"},"step":{"line":23,"prefix":"*","index":8,"text":"match persisted.responseStatus == tokenData.responseStatus"}},{"result":{"nanos":4495600,"millis":4.4956,"status":"passed"},"step":{"line":24,"prefix":"*","index":9,"text":"match persistedResponse.status == tokenData.responseStatus"}},{"result":{"nanos":9167600,"millis":9.1676,"status":"passed"},"step":{"line":25,"prefix":"And","index":10,"text":"print { currentDate: tokenData.currentDate, coop_codecb: tokenData.coop_codecb, tokenLength: tokenData.auth_tokencb.length }"},"stepLog":"14:08:10.950 [print] {\n  \"currentDate\": \"20251022\",\n  \"coop_codecb\": \"0205\",\n  \"tokenLength\": 1365\n}\n \n"},{"result":{"nanos":4804900,"millis":4.8049,"status":"passed"},"step":{"line":26,"prefix":"And","index":11,"text":"print { statusCode: tokenData.responseStatus, responseBody: tokenData.rawResponse }"},"stepLog":"14:08:10.956 [print] {\n  \"statusCode\": 200,\n  \"responseBody\": {\n    \"access_token\": \"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI2dUJWTkN6VlViUFBlTFdReEM0WDAyYVM3UnM2UGRYV1dja1dfc0xZMHlFIn0.eyJleHAiOjE3NjExNjAzODIsImlhdCI6MTc2MTE2MDA4MiwianRpIjoidHJydGNjOmUwZWZmODJlLTgyODQtY2I2MC02Y2NmLTI5NjA2OTBjOWFhMCIsImlzcyI6Imh0dHBzOi8vYXV0ZW50aWNhY2lvbnFhLmNvb25lY3RhLmNvbS5lYy9hdXRoL3JlYWxtcy9QQU5BUEFZIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6Ijk5OGMyZmUwLTJjOGYtNGQwNC1iZjExLWY1OWExZTM5ODg3MyIsInR5cCI6IkJlYXJlciIsImF6cCI6IjAyMDVjYiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiLyoiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRlZmF1bHQtcm9sZXMtYWRtaW5wYW5hcGF5Iiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7IjAyMDVjYiI6eyJyb2xlcyI6WyJ1bWFfcHJvdGVjdGlvbiJdfSwiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMTAuMTAuMTUxIiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LTAyMDVjYiIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xMC4xNTEiLCJjbGllbnRfaWQiOiIwMjA1Y2IifQ.PTZEstR6aCY6zKCHemgr9vawITd3cz_cisSPRvLyk7Lcv110-ePinBLnt9Z_W4jyUU6cUbs_huARM8I9qagdM_5gvUfvEZ3iz-xo6HRDJ2zkwqHkJLLdH0xmjztVcrWcfMWypQCzz2n5mB12nH-hLuu5BBug1BMT-R7k-AuK7rVy5-iSzWDf69pSHV3_3lSV1EnpXN4D_GnyG0FufsNfIZtRq5Vb8ETwq5XndwMqdb0e5ii7xqsCjXgMm8P7wBx2NeCghqYDh4ZQVchiDzLWQYiY4xQFCPH3qAcnYzhpx3j5NRXVAkKylw98nq6FAmtzPSMR93p1VDzHjhg6_LbOSQ\",\n    \"expires_in\": 300,\n    \"refresh_expires_in\": 0,\n    \"token_type\": \"Bearer\",\n    \"not-before-policy\": 0,\n    \"scope\": \"profile email\"\n  }\n}\n \n"}],"executorName":"main","line":14,"name":"Token obtenido correctamente y persistido en archivos auxiliares","description":"","durationMillis":1737.3595,"startTime":1761160088505,"failed":false,"refId":"[1:14]","endTime":1761160090956,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":6253200,"millis":6.2532,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def responseContext = callonce read('classpath:helpers\/generate-token.feature')"},"stepLog":"14:08:11.001 key store key count for classpath:certificado\/clientcert.cbiblian.internal 1.pfx: 1\n"},{"result":{"nanos":680700,"millis":0.6807,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def tokenData = responseContext.tokenInfo"}},{"result":{"nanos":488600,"millis":0.4886,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def Files = Java.type('java.nio.file.Files')"}},{"result":{"nanos":739700,"millis":0.7397,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def Paths = Java.type('java.nio.file.Paths')"}},{"result":{"nanos":554400,"millis":0.5544,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def StandardCharsets = Java.type('java.nio.charset.StandardCharsets')"}},{"result":{"nanos":3536800,"millis":3.5368,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def projectDir = karate.properties['karate.project.dir'] ? karate.properties['karate.project.dir'] : java.lang.System.getProperty('user.dir')"}},{"result":{"nanos":1633100,"millis":1.6331,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def tokenPath = Paths.get(projectDir, 'target', 'token.txt')"}},{"result":{"nanos":1027900,"millis":1.0279,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def tokenJsonPath = Paths.get(projectDir, 'target', 'token-data.json')"}},{"result":{"nanos":637500,"millis":0.6375,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def tokenResponsePath = Paths.get(projectDir, 'target', 'token-response.json')"}},{"result":{"nanos":860200,"millis":0.8602,"status":"passed"},"step":{"line":30,"prefix":"Given","index":0,"text":"url 'https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token'"}},{"result":{"nanos":553900,"millis":0.5539,"status":"passed"},"step":{"line":31,"prefix":"And","index":1,"text":"header Content-Type = 'application\/x-www-form-urlencoded'"}},{"result":{"nanos":624700,"millis":0.6247,"status":"passed"},"step":{"line":32,"prefix":"And","index":2,"text":"form field grant_type = 'client_credentials'"}},{"result":{"nanos":450500,"millis":0.4505,"status":"passed"},"step":{"line":33,"prefix":"And","index":3,"text":"form field client_id = '9999cb'"}},{"result":{"nanos":395800,"millis":0.3958,"status":"passed"},"step":{"line":34,"prefix":"And","index":4,"text":"form field client_secret = 'iXaIz03uhylB2nG6jxTLz2QdHs37GbXn'"}},{"result":{"nanos":301932600,"millis":301.9326,"status":"passed"},"step":{"line":35,"prefix":"When","index":5,"text":"method post"},"stepLog":"14:08:11.030 request:\n1 > POST https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token\n1 > Content-Type: application\/x-www-form-urlencoded\n1 > Content-Length: 93\n1 > Host: autenticacionqa.coonecta.com.ec\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\ngrant_type=client_credentials&client_id=9999cb&client_secret=iXaIz03uhylB2nG6jxTLz2QdHs37GbXn\n\n14:08:11.323 response time in milliseconds: 293\n1 < 401\n1 < Date: Wed, 22 Oct 2025 19:08:03 GMT\n1 < Content-Type: application\/json\n1 < Content-Length: 93\n1 < Connection: keep-alive\n1 < Cache-Control: no-store\n1 < Pragma: no-cache\n1 < Referrer-Policy: no-referrer\n1 < Strict-Transport-Security: max-age=31536000; includeSubDomains\n1 < X-Content-Type-Options: nosniff\n{\"error\":\"invalid_client\",\"error_description\":\"Invalid client or Invalid client credentials\"}\n\n"},{"result":{"nanos":9814500,"errorMessage":"status code was: 401, expected: 200, response time in milliseconds: 293, url: https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token, response: \n{\"error\":\"invalid_client\",\"error_description\":\"Invalid client or Invalid client credentials\"}\nclasspath:TokenGeneration.feature:36","millis":9.8145,"status":"failed"},"step":{"line":36,"prefix":"Then","index":6,"text":"status 200"},"stepLog":"14:08:11.340 classpath:TokenGeneration.feature:36\nThen status 200\nstatus code was: 401, expected: 200, response time in milliseconds: 293, url: https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token, response: \n{\"error\":\"invalid_client\",\"error_description\":\"Invalid client or Invalid client credentials\"}\nclasspath:TokenGeneration.feature:36\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":37,"prefix":"And","index":7,"text":"match response.error == 'invalid_client'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":38,"prefix":"And","index":8,"text":"match karate.lowerCase(response.error_description) contains 'invalid client'"}}],"line":29,"description":"","durationMillis":330.1841,"failed":true,"error":"status code was: 401, expected: 200, response time in milliseconds: 293, url: https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token, response: \n{\"error\":\"invalid_client\",\"error_description\":\"Invalid client or Invalid client credentials\"}\nclasspath:TokenGeneration.feature:36","tags":["invalid_client_id","token_negative"],"executorName":"main","name":"Error al solicitar token con client_id incorrecto","startTime":1761160090989,"refId":"[2:29]","endTime":1761160091340,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":7413300,"millis":7.4133,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def responseContext = callonce read('classpath:helpers\/generate-token.feature')"},"stepLog":"14:08:11.406 key store key count for classpath:certificado\/clientcert.cbiblian.internal 1.pfx: 1\n"},{"result":{"nanos":786400,"millis":0.7864,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def tokenData = responseContext.tokenInfo"}},{"result":{"nanos":2321000,"millis":2.321,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def Files = Java.type('java.nio.file.Files')"}},{"result":{"nanos":451100,"millis":0.4511,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def Paths = Java.type('java.nio.file.Paths')"}},{"result":{"nanos":277600,"millis":0.2776,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def StandardCharsets = Java.type('java.nio.charset.StandardCharsets')"}},{"result":{"nanos":3681400,"millis":3.6814,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":5,"text":"def projectDir = karate.properties['karate.project.dir'] ? karate.properties['karate.project.dir'] : java.lang.System.getProperty('user.dir')"}},{"result":{"nanos":535000,"millis":0.535,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":6,"text":"def tokenPath = Paths.get(projectDir, 'target', 'token.txt')"}},{"result":{"nanos":353700,"millis":0.3537,"status":"passed"},"step":{"background":true,"line":11,"prefix":"*","index":7,"text":"def tokenJsonPath = Paths.get(projectDir, 'target', 'token-data.json')"}},{"result":{"nanos":524400,"millis":0.5244,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":8,"text":"def tokenResponsePath = Paths.get(projectDir, 'target', 'token-response.json')"}},{"result":{"nanos":123100,"millis":0.1231,"status":"passed"},"step":{"line":42,"prefix":"Given","index":0,"text":"url 'https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token'"}},{"result":{"nanos":137700,"millis":0.1377,"status":"passed"},"step":{"line":43,"prefix":"And","index":1,"text":"header Content-Type = 'application\/x-www-form-urlencoded'"}},{"result":{"nanos":485200,"millis":0.4852,"status":"passed"},"step":{"line":44,"prefix":"And","index":2,"text":"form field grant_type = 'client_credentials'"}},{"result":{"nanos":1587800,"millis":1.5878,"status":"passed"},"step":{"line":45,"prefix":"And","index":3,"text":"form field client_id = '0205cb'"}},{"result":{"nanos":3300300,"millis":3.3003,"status":"passed"},"step":{"line":46,"prefix":"And","index":4,"text":"form field client_secret = 'invalid-secret-123'"}},{"result":{"nanos":326363600,"millis":326.3636,"status":"passed"},"step":{"line":47,"prefix":"When","index":5,"text":"method post"},"stepLog":"14:08:11.445 request:\n1 > POST https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token\n1 > Content-Type: application\/x-www-form-urlencoded\n1 > Content-Length: 79\n1 > Host: autenticacionqa.coonecta.com.ec\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\ngrant_type=client_credentials&client_id=0205cb&client_secret=invalid-secret-123\n\n14:08:11.756 response time in milliseconds: 311\n1 < 401\n1 < Date: Wed, 22 Oct 2025 19:08:04 GMT\n1 < Content-Type: application\/json\n1 < Content-Length: 98\n1 < Connection: keep-alive\n1 < Cache-Control: no-store\n1 < Pragma: no-cache\n1 < Referrer-Policy: no-referrer\n1 < Strict-Transport-Security: max-age=31536000; includeSubDomains\n1 < X-Content-Type-Options: nosniff\n{\"error\":\"unauthorized_client\",\"error_description\":\"Invalid client or Invalid client credentials\"}\n\n"},{"result":{"nanos":270900,"errorMessage":"status code was: 401, expected: 200, response time in milliseconds: 311, url: https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token, response: \n{\"error\":\"unauthorized_client\",\"error_description\":\"Invalid client or Invalid client credentials\"}\nclasspath:TokenGeneration.feature:48","millis":0.2709,"status":"failed"},"step":{"line":48,"prefix":"Then","index":6,"text":"status 200"},"stepLog":"14:08:11.764 classpath:TokenGeneration.feature:48\nThen status 200\nstatus code was: 401, expected: 200, response time in milliseconds: 311, url: https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token, response: \n{\"error\":\"unauthorized_client\",\"error_description\":\"Invalid client or Invalid client credentials\"}\nclasspath:TokenGeneration.feature:48\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":49,"prefix":"And","index":7,"text":"match response.error == 'unauthorized_client'"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":50,"prefix":"And","index":8,"text":"match karate.lowerCase(response.error_description) contains 'invalid client'"}}],"line":41,"description":"","durationMillis":348.6125,"failed":true,"error":"status code was: 401, expected: 200, response time in milliseconds: 311, url: https:\/\/autenticacionqa.coonecta.com.ec\/auth\/realms\/PANAPAY\/protocol\/openid-connect\/token, response: \n{\"error\":\"unauthorized_client\",\"error_description\":\"Invalid client or Invalid client credentials\"}\nclasspath:TokenGeneration.feature:48","tags":["invalid_client_secret","token_negative"],"executorName":"main","name":"Error al solicitar token con client_secret incorrecto","startTime":1761160091392,"refId":"[3:41]","endTime":1761160091764,"exampleIndex":-1}],"callDepth":0,"name":"Generacion y verificacion de token PANAPAY","description":"","resultDate":"2025-10-22 02:08:11 p. m.","durationMillis":2416.1561,"passedCount":1}